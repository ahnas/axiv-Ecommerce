{% extends 'base2.html' %}
{% load static %}
{% block title %}Checkout{% endblock %}

{% block content %}

<style>

    .mt-3{
        margin-top: 24px;
    }
    .mb-2{
        margin-bottom: 25px;
    }
    .whitt {
        background-color: white;
    }


    body {
        margin-top: 20px;
        color: #484b51;
    }

    .text-secondary-d1 {
        color: #728299 !important;
    }

    .page-header {
        margin: 0 0 1rem;
        padding-bottom: 1rem;
        padding-top: .5rem;
        border-bottom: 1px dotted #e2e2e2;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-pack: justify;
        justify-content: space-between;
        -ms-flex-align: center;
        align-items: center;
    }

    .page-title {
        padding: 0;
        margin: 0;
        font-size: 1.75rem;
        font-weight: 300;
    }

    .brc-default-l1 {
        border-color: #dce9f0 !important;
    }

    .ml-n1,
    .mx-n1 {
        margin-left: -.25rem !important;
    }

    .mr-n1,
    .mx-n1 {
        margin-right: -.25rem !important;
    }

    .mb-4,
    .my-4 {
        margin-bottom: 1.5rem !important;
    }

    hr {
        margin-top: 1rem;
        margin-bottom: 1rem;
        border: 0;
        border-top: 1px solid rgba(0, 0, 0, .1);
    }

    .text-grey-m2 {
        color: #888a8d !important;
    }

    .text-success-m2 {
        color: #86bd68 !important;
    }

    .font-bolder,
    .text-600 {
        font-weight: 600 !important;
    }

    .text-110 {
        font-size: 110% !important;
    }

    .text-blue {
        color: #005f69 !important;
    }

    .pb-25,
    .py-25 {
        padding-bottom: .75rem !important;
    }

    .pt-25,
    .py-25 {
        padding-top: .75rem !important;
    }

    .bgc-default-tp1 {
        background-color: rgba(121, 169, 197, .92) !important;
    }

    .bgc-default-l4,
    .bgc-h-default-l4:hover {
        background-color: #f3f8fa !important;
    }

    .page-header .page-tools {
        -ms-flex-item-align: end;
        align-self: flex-end;
    }

    .btn-light {
        color: #757984;
        background-color: #f5f6f9;
        border-color: #dddfe4;
    }

    .w-2 {
        width: 1rem;
    }

    .text-120 {
        font-size: 120% !important;
    }

    .text-primary-m1 {
        color: #4087d4 !important;
    }

    .text-danger-m1 {
        color: #dd4949 !important;
    }

    .text-blue-m2 {
        color: #68a3d5 !important;
    }

    .text-150 {
        font-size: 150% !important;
    }

    .text-60 {
        font-size: 60% !important;
    }

    .text-grey-m1 {
        color: #7b7d81 !important;
    }

    .align-bottom {
        vertical-align: bottom !important;
    }
    .float-right{
        float: right !important;
    }
</style>

<div class="sw_contact_form_wrapper sw_contact_form_padder">

    <div class="container ">
        {% if invoice %}

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
        <div class="page-content whitt">
            <div class="page-header text-blue-d2">
                <h1 class="page-title text-secondary-d1">
                    Invoice
                </h1>
            </div>

            <div class="container px-0">
                <div class="row mt-4">
                    <div class="col-12 col-lg-10 offset-lg-1">
                        <div class="row">
                            <div class="col-12">

                            </div>
                        </div>
                        <!-- .row -->
                       

                        <div class="row">
                            <div class="col-sm-6">
                                <div>
                                    <span class="text-sm text-grey-m2 align-middle">To:</span>
                                    <span class="text-600 text-110 text-blue align-middle">{{userDetails.name}}</span>
                                </div>
                                <div class="text-grey-m2">
                                    <div class="my-1">
                                        
                                        {{userDetails.address}}

                                    </div>
                                    <div class="my-1"><i class="fa fa-phone fa-flip-horizontal text-secondary"></i> <b
                                            class="text-600">{{userDetails.number}}</b></div>
                                </div>
                            </div>
                            <!-- /.col -->

                            <div class="text-95 col-sm-6 align-self-start d-sm-flex justify-content-end">

                                <div class="text-grey-m2">
                                    <div class="mt-1 mb-2 text-secondary-m1 text-600 text-125">
                                        Invoice
                                    </div>

                                    <div class="my-2"><i class="fa fa-circle text-blue-m2 text-xs mr-1"></i> <span
                                            class="text-600 text-90">ID : </span> #A10{{userDetails.orderID}}</div>

                                    <div class="my-2"><i class="fa fa-circle text-blue-m2 text-xs mr-1"></i> <span
                                            class="text-600 text-90">Issue Date : </span>{{userDetails.date}}</div>

                                </div>
                            </div>
                            <!-- /.col -->
                        </div>

                        <div class="mt-4">
                            
                           
                            
                <div class="table-responsive">
                    <table class="table table-striped table-borderless border-0 border-b-2 brc-default-l1">
                        <thead class="bg-none bgc-default-tp1">
                            <tr class="text-white">
                                <th class="opacity-2">#</th>
                                <th>Name</th>
                                <th>Qty</th>
                                <th>Unit Price</th>
                                <th width="140">Amount</th>
                            </tr>
                        </thead>

                        <tbody class="text-95 text-secondary-d3">
                            
                            {% for cartitems in cartitems %}
                            <tr>

                                <td>{{cartitems.cnt}}</td>
                                <td>{{cartitems.product.name}}</td>
                                <td>{{cartitems.quantity}}</td>
                                <td class="text-95">{{cartitems.product.price}}</td>
                                <td class="text-secondary-d2">₹{{cartitems.price}}</td>

                            </tr> 
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            

                            <div class="row mt-3">
                                

                                <div class="col float-right text-grey text-90 order-first order-sm-last">
                                    

                                    

                                    <div class="row my-2 align-items-center bgc-primary-l3 p-2">
                                        <div class="col">
                                            Total Amount
                                        </div>
                                        <div class="col">
                                            <span class="text-150 text-success-d3 opacity-2">₹{{totalprice}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <hr />

                            <div class="mb-2">
                                <span class="text-secondary-d1 text-105">Thank you for your business</span>
                                <a href="{{messagestring}}" onclick="checkout()" class="btn btn-info btn-bold px-4 float-right mt-3 mt-lg-0">Send to Whatsapp</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="contact_wrapper">
            <div class="cmnt_area_div_mn">
                <div class="sw_left_heading_wraper sw_dark_heading_wraper">
                    <h1>Fill Out Details</h1>
                    <img src="{% static 'images/hd_line_dark.png' %}" alt="title">
                    <p>Donec quis magna sit amet risus vulputate maximus eget eget arcu. Praesent sed molestie tortor. </p>
                </div>
                <div class="row">

                    <form action="" method="post" class="ajax">
                        {% csrf_token %}
                        <div class="cont_main_section">
                            
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="contect_form1">
                                    <input type="text" placeholder="Name" name="name">
                                </div>
                            </div> 
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="contect_form1">
                                    <input type="text" placeholder="Phone Number" name="number">
                                </div>
                            </div>   
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="contect_form4">
                                    <textarea rows="5" placeholder="Address" name="address"></textarea>
                                </div>
                            </div>     
                            

                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="response"></div>
                                <div class="cntct_2_btn_wrapper">
                                    <button type="" class="submitForm waves-effect waves-light waves-ripple">send</button>
                                </div>
                            </div>
                            
                        </div>
                    </form>
                    
                </div>
            </div>
        </div>
        {% endif %}
    </div>

</div>

      {% block javascript %}

<script>
    function checkout() {
    
    $.ajax({
        url: 'http://127.0.0.1:8000/confirmcheckout/',
        type: 'GET',
        success: function (response) {
            $("#cartlen").html(response['cartLength'])

        },
    });
}

</script>
{% endblock %}
{% endblock %}
